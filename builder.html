<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Where the magic happens!">
  <meta name="author" content="Delta">
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body style="background-color: rgb(32, 32, 32)">
<div id="topbar" class="barflex"> 
<div>Title: <input type="text" id="title" placeholder="Unnamed auto-generated story"></div><div>  Author: <input type="text" id="author" placeholder="Unspecified"></div> <button class="buttons" onclick="saveTop()">Save</button>
</div>

<section id="flex" class="flex">
<hr width="50px" height="50px" style="visibility:hidden;"/>
<hr width="50px" height="50px" style="visibility:hidden;"/>
<hr width="50px" height="50px" style="visibility:hidden;"/>

<div id="finalbox">
<code></code><pre>&lt;!-- This is an auto-generated storysystem used by the tool you used, good luck!-->
<div id="finalBasic">&lt;!DOCTYPE html>
&lt;html>
&lt;head>
  &lt;meta charset="UTF-8">
  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"></div><div id="finalMetas"></div><div id="finalStyle"></div>&lt;/head>
&lt;body>
</pre></code>
</div>
</section>
<div id="downbar" class="barflex"> 
<button class="buttons" onclick="showFinal()">Show/Hide Results</button><button class="buttons" onclick="makeItemBasic()">Summon a new item</button>
</div>

<section id="builder">
  
</section>

<script>
//load
var title = "Unnamed auto-generated story";
var author = "Unspecified";
var dispfinal = 0;
var ItemNumber = 0;
//save retrieval
if (localStorage.author) {
  author = localStorage.author;
} else {
  localStorage.author = author;
}
if (localStorage.title) {
  title = localStorage.title;
} else {
  localStorage.title = title;
}
if (localStorage.dispfinal) {
  dispfinal = Number(localStorage.dispfinal);
  if (dispfinal == 1) {
    document.getElementById("flex").style.display = "flex";
  } else {
    document.getElementById("flex").style.display = "none";
  }
} else {
  localStorage.dispfinal = dispfinal;
}
//first build
document.getElementById("finalMetas").innerHTML = "  &lt;title>" + title + "&lt;/title>" + "</br>" + "  &lt;meta name=\"author\" content=\"" + author + "\">";
function showFinal() {
    if (dispfinal == 0) {
        document.getElementById("flex").style.display = "flex";
        console.info("Requested result showing");
        dispfinal++;
        localStorage.dispfinal = dispfinal;
    } else {
        document.getElementById("flex").style.display = "none";
        console.info("Requested result hiding");
        dispfinal--;
        localStorage.dispfinal = dispfinal;
    }
}
function saveTop() {
title = document.getElementById("title").value;
console.info("Changed file title to \"" + title + "\"")
localStorage.title = title;
author = document.getElementById("author").value;
console.info("Changed file author to \"" + author + "\"")
localStorage.author = author;
document.getElementById("finalMetas").innerHTML = "  &lt;title>" + title + "&lt;/title>" + "</br>" + "  &lt;meta name=\"author\" content=\"" + author + "\">";
}
function makeItemBasic() {
  ItemNumber++;
  eval("baseItem" + ItemNumber + "= {id:" + ItemNumber + "}");
  document.getElementById("builder").innerHTML += "<div class=\"item\" id=\"" + ItemNumber + "\"><input type=\"text\" id=\"t" + ItemNumber + "\" placeholder=\"Type some text...\"><button onclick=\"savetext(" + ItemNumber + ")\">Save</button></div>";
  console.info("baseItem" + ItemNumber + " creation suceed.");
  document.getElementById("finalbox").innerHTML += "<div></div>"
}
function savetext(n) {
  eval("baseItem" + n + ".text = document.getElementById(\"t\"+ baseItem" + n + ".id).value");
  console.info("Saved");
}
</script>
</body>
</html>
